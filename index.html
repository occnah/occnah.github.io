<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Ossian Stange</title>

  <link rel="stylesheet" href="styles.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Fullscreen HERO with Vanta background -->
  <header id="hero" class="hero">
    <div id="vanta-bg" class="vanta"></div>

    <div class="hero__content" role="banner" aria-label="Intro">
      <h1 class="hero__title">Hi, I’m Ossian</h1>
      <p class="hero__subtitle">Software Engineer & DevOps Specialist</p>
    </div>

    <button class="scroll-cue" id="scrollCue" aria-label="Scroll to content">
      <span>Scroll</span>
      <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 16l-6-6h12l-6 6z"></path>
      </svg>
    </button>
  </header>

  <!-- ROLES SCROLL SECTION -->
  <section id="roles" class="roles">
    <div class="roles__inner">
      <div class="roles__left">
        <h2 class="roles__fixed">I’m a</h2>
      </div>

      <div class="roles__right">
        <!-- All phrases are stacked; we animate opacity/position on scroll -->
        <div class="role"><span class="role__text">AI Engineer</span></div>
        <div class="role"><span class="role__text">DevOps Specialist</span></div>
        <div class="role"><span class="role__text">Fullstack Dev</span></div>
      </div>
    </div>
  </section>

  <!-- STICKY CASE STUDY: GRADR (FIRST, IMAGE RIGHT) -->
  <section id="case-gradr" class="case">
    <div class="case__inner">
      <!-- Left: scrolling copy -->
      <div class="case__left">
        <div class="case__panel">
          <p class="case__text">As a software engineer at <span class="grad-accent">Gradr</span>...</p>
        </div>

        <div class="case__panel">
          <p class="case__text">
            I help to create AI solutions for schools—automating grading tasks and letting students practice custom, teacher-tuned questions at scale.
          </p>
        </div>

        <div class="case__panel">
          <p class="case__text">
            Saving teachers <span class="grad-number">7+</span> hours every week*
          </p>
          <small class="case__note">* Based on Gradr>’s internal stats.</small>
        </div>

        <div class="case__panel">
          <p class="case__text">Helping <span class="grad-number">thousands</span> of students reach their potential.</p>
        </div>
      </div>

      <!-- Right: sticky image (clickable) -->
      <div class="case__right">
        <figure class="case__shot">
          <a href="https://gradr.se" target="_blank" rel="noopener" aria-label="Open gradr.se">
            <img src="assets/gradr.png" alt="Gradr platform UI" loading="lazy" />
          </a>
          <figcaption class="visually-hidden">Pinned Gradr mockup while copy scrolls.</figcaption>
        </figure>
      </div>
    </div>
  </section>

  <!-- STICKY CASE STUDY: THS BUSINESS (SECOND, IMAGE LEFT) -->
  <section id="case-ths" class="case case--flip">
    <div class="case__inner">
      <!-- Left: sticky image (clickable) -->
      <div class="case__right">
        <figure class="case__shot">
          <a href="https://thsbusiness.se" target="_blank" rel="noopener" aria-label="Open thsbusiness.se">
            <img src="assets/thsb.png" alt="THS Business website design by Ossian" loading="lazy" />
          </a>
          <figcaption class="visually-hidden">Pinned THS Business mockup while copy scrolls.</figcaption>
        </figure>
      </div>

      <!-- Right: scrolling copy -->
      <div class="case__left">
        <div class="case__panel">
          <p class="case__text">As DevOps Lead at <span class="grad-accent">THS Business</span>...</p>
        </div>

        <div class="case__panel">
          <p class="case__text">I designed and scaled <span class="grad-accent">AWS</span> infrastructure to handle thousands of job applications and event content reliably.</p>
        </div>

        <div class="case__panel">
          <p class="case__text">
            Helping <span class="grad-number">18,000+</span> students and <span class="grad-number">150+</span> companies every year.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT (fullscreen) -->
  <footer id="contact" class="contact contact--hero" role="contentinfo">
    <div class="contact__wrap">
      <p class="contact__eyebrow">Contact</p>

      <h2 class="contact__title">Let’s build something great.</h2>
      <p class="contact__sub">Open to AI engineering, DevOps and Fullstack projects</p>

      <div class="contact__actions">
        <a class="contact__btn contact__btn--primary" href="mailto:ossianst@kth.se" aria-label="Email Ossian">
          <svg aria-hidden="true" width="20" height="20" viewBox="0 0 24 24">
            <path d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5v2Z" fill="currentColor"/>
          </svg>
          <span>Email me</span>
        </a>

        <a class="contact__btn" href="https://www.linkedin.com/in/your-handle" target="_blank" rel="noopener" aria-label="Ossian on LinkedIn">
          <svg aria-hidden="true" width="20" height="20" viewBox="0 0 24 24">
            <path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1s2.48 1.12 2.48 2.5ZM0 8h5v16H0V8Zm7.5 0h4.8v2.2h.07c.67-1.2 2.3-2.46 4.73-2.46 5.06 0 6 3.33 6 7.65V24h-5v-7.3c0-1.74-.03-3.97-2.42-3.97-2.43 0-2.8 1.89-2.8 3.84V24h-5V8Z" fill="currentColor"/>
          </svg>
          <span>LinkedIn</span>
        </a>
      </div>

      <div class="contact__meta">
        <a href="mailto:ossianst@kth.se">ossianst@kth.se</a>
        <span aria-hidden="true">·</span>
        <span>Stockholm, Sweden</span>
      </div>
    </div>
  </footer>

  <!-- HACKER WALL -->
  <section id="hacker" class="hacker">
    <canvas id="hacker-canvas" aria-hidden="true"></canvas>
    <h2 class="hacker__title">Not bored yet?</h2>
  </section>

  <!-- Vanta on HERO -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.waves.min.js"></script>
  <script>
    // Ensure the element exists before initializing Vanta
    let vantaEffect;
    window.addEventListener('DOMContentLoaded', () => {
      VANTA.WAVES({
        el: "#vanta-bg",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        color: 0x162a
      })

      // Smooth scroll to the first section
      const cue = document.getElementById('scrollCue');
      cue?.addEventListener('click', () => {
        document.querySelector('#roles')?.scrollIntoView({ behavior: 'smooth' });
      });
    });

    // Clean up (optional good practice if you later navigate SPA-style)
    window.addEventListener('beforeunload', () => {
      if (vantaEffect && vantaEffect.destroy) vantaEffect.destroy();
    });
  </script>

  <!-- GSAP + ScrollTrigger (for scroll-driven transitions) -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

  <!-- Contact entrance -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      if (window.gsap && window.ScrollTrigger) {
        gsap.registerPlugin(ScrollTrigger);
        gsap.from('#contact .contact__wrap > *', {
          opacity: 0, y: 20, duration: 0.8, ease: 'power2.out',
          stagger: 0.08,
          scrollTrigger: {
            trigger: '#contact',
            start: 'top 80%',
            once: true
          }
        });
      }
    });
  </script>

  <!-- Roles timeline -->
  <script>
    // Scroll-driven role cycling
    window.addEventListener('DOMContentLoaded', () => {
      gsap.registerPlugin(ScrollTrigger);

      const phrases = gsap.utils.toArray('#roles .role');
      gsap.set(phrases.map(el => el.querySelector('.role__text')), { opacity: 0, y: 30 });

      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: '#roles',
          start: 'top top',
          end: () => '+=' + (phrases.length * window.innerHeight * 0.85),
          scrub: 0.6,
          pin: true,
          anticipatePin: 1
        }
      });

      phrases.forEach((el) => {
        const t = el.querySelector('.role__text');
        tl.to(t, { opacity: 1, y: 0, duration: 0.8, ease: 'power2.out' });
        tl.to({}, { duration: 0.6 });
        tl.to(t, { opacity: 0, y: -30, duration: 0.8, ease: 'power2.in' });
      });

      // Accessibility: avoid tabbing to hidden items
      ScrollTrigger.addEventListener('refresh', () => {
        phrases.forEach(el => {
          const visible = parseFloat(gsap.getProperty(el.querySelector('.role__text'), 'opacity')) > 0.5;
          el.setAttribute('aria-hidden', visible ? 'false' : 'true');
        });
      });
    });
  </script>

  <!-- Case: GRADR -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      // === Sticky case: GRADR (image right, copy left) ===
      const gradrPanels = gsap.utils.toArray('#case-gradr .case__panel');
      const gradrTexts  = gradrPanels.map(p => p.querySelector('.case__text'));
      const gradrNotes  = gradrPanels.map(p => p.querySelector('.case__note')).filter(Boolean);

      gsap.set(gradrTexts, { opacity: 0, y: 30 });
      gsap.set(gradrNotes, { opacity: 0, y: 20 });

      const tlGradr = gsap.timeline({
        scrollTrigger: {
          trigger: '#case-gradr',
          start: 'top top',
          end: () => '+=' + (gradrPanels.length * window.innerHeight * 0.9),
          scrub: 0.6,
          pin: true,
          anticipatePin: 1
        }
      });

      gradrPanels.forEach((panel) => {
        const t = panel.querySelector('.case__text');
        const n = panel.querySelector('.case__note');

        tlGradr
          .to(t, { opacity: 1, y: 0, duration: 0.9, ease: 'power2.out' })
          .to(n || {}, { opacity: 1, y: 0, duration: n ? 0.6 : 0, ease: 'power2.out' }, '<+=0.2')
          .to({}, { duration: 0.8 }) // hold
          .to([t, n].filter(Boolean), { opacity: 0, y: -28, duration: 0.8, ease: 'power2.in' });
      });

      // subtle parallax for the mock
      gsap.to('#case-gradr .case__shot', {
        yPercent: -6,
        ease: 'none',
        scrollTrigger: {
          trigger: '#case-gradr',
          start: 'top top',
          end: 'bottom top',
          scrub: true
        }
      });
    });
  </script>

  <!-- Case: THS BUSINESS -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      // === Sticky case: THS (image left, copy right) ===
      const panels = gsap.utils.toArray('#case-ths .case__panel');
      const texts  = panels.map(p => p.querySelector('.case__text'));

      gsap.set(texts, { opacity: 0, y: 30 });

      const tlCase = gsap.timeline({
        scrollTrigger: {
          trigger: '#case-ths',
          start: 'top top',
          end: () => '+=' + (panels.length * window.innerHeight * 0.9),
          scrub: 0.6,
          pin: true,
          anticipatePin: 1
        }
      });

      panels.forEach((panel) => {
        const t = panel.querySelector('.case__text');
        tlCase.to(t, { opacity: 1, y: 0, duration: 0.9, ease: 'power2.out' });
        tlCase.to({}, { duration: 0.8 });
        tlCase.to(t, { opacity: 0, y: -28, duration: 0.8, ease: 'power2.in' });
      });

      gsap.to('#case-ths .case__shot', {
        yPercent: -6,
        ease: 'none',
        scrollTrigger: {
          trigger: '#case-ths',
          start: 'top top',
          end: 'bottom top',
          scrub: true
        }
      });
    });
  </script>

  <script>
    /* Fullscreen animated hacker text background (canvas) — refined */
    (function () {
      function initHackerCanvas() {
        const section = document.getElementById('hacker');
        if (!section) return;

        const canvas = document.getElementById('hacker-canvas');
        const ctx = canvas.getContext('2d');

        // characters + EXACTLY three colors (from your reference)
        const CHARS  = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789{}[]()<>=+-*/|\\_:#$%&@!?;.,~^';
        const COLORS = ['#60dca3', '#2b4439', '#5fb0d3']; // mint, deep green, blue

        let width, height, cols, rows, cell, fontSize, grid = [];
        let active = false;      // only animate while in view
        let last = 0;
        const interval = 55;     // faster updates (ms) -> more chaotic
        const changeRatio = 0.18; // % of cells to change per frame

        function resize() {
          const dpr = window.devicePixelRatio || 1;
          width = section.clientWidth;
          height = section.clientHeight;

          canvas.width  = Math.floor(width * dpr);
          canvas.height = Math.floor(height * dpr);
          canvas.style.width  = width + 'px';
          canvas.style.height = height + 'px';
          ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

          // Smaller letters
          fontSize = Math.max(11, Math.min(18, Math.round(width / 85)));
          cell = fontSize * 1.1;

          ctx.font = `${fontSize}px ui-monospace, SFMono-Regular, Menlo, Consolas, Monaco, monospace`;
          ctx.textBaseline = 'top';

          cols = Math.ceil(width / cell);
          rows = Math.ceil(height / cell);

          grid = new Array(cols * rows).fill(0).map(() => ({
            ch: CHARS[(Math.random() * CHARS.length) | 0],
            color: COLORS[(Math.random() * COLORS.length) | 0]
          }));
        }

        function render() {
          ctx.fillStyle = '#0b0f1a';
          ctx.fillRect(0, 0, width, height);

          let i = 0;
          for (let r = 0; r < rows; r++) {
            for (let c = 0; c < cols; c++) {
              const cellData = grid[i++];
              ctx.fillStyle = cellData.color;
              ctx.fillText(cellData.ch, c * cell, r * cell);
            }
          }
        }

        function tick(t) {
          requestAnimationFrame(tick);
          if (!active) return;           // pause when off-screen
          if (t - last < interval) return;
          last = t;

          // flip a bigger chunk of cells per frame for a chaotic feel
          const changes = Math.max(1, Math.floor(grid.length * changeRatio));
          for (let k = 0; k < changes; k++) {
            const idx = (Math.random() * grid.length) | 0;
            grid[idx].ch   = CHARS[(Math.random() * CHARS.length) | 0];
            grid[idx].color = COLORS[(Math.random() * COLORS.length) | 0];
          }

          render();
        }

        resize();
        window.addEventListener('resize', resize);
        requestAnimationFrame(tick);

        // Title reveal on scroll (matches your other sections)
        if (window.gsap && window.ScrollTrigger) {
          gsap.registerPlugin(ScrollTrigger);
          gsap.set('#hacker .hacker__title', { opacity: 0, y: 30 });
          ScrollTrigger.create({
            trigger: section,
            start: 'top 75%',
            onEnter: () => {
              active = true; // start animating
              gsap.to('#hacker .hacker__title', {
                opacity: 1, y: 0, duration: 0.9, ease: 'power2.out'
              });
            },
            onLeaveBack: () => {
              active = false; // stop animating when scrolling away
              gsap.set('#hacker .hacker__title', { opacity: 0, y: 30 });
            }
          });
        } else {
          // Fallback: animate immediately if GSAP isn't available
          active = true;
        }
      }

      window.addEventListener('DOMContentLoaded', initHackerCanvas);
    })();
    </script>

</body>
</html>
