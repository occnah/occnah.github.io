<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Ossian Stange</title>

  <link rel="stylesheet" href="styles.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Fullscreen HERO with Vanta background -->
  <header id="hero" class="hero">
    <div id="vanta-bg" class="vanta"></div>

    <div class="hero__content" role="banner" aria-label="Intro">
      <h1 class="hero__title">Hi, I’m Ossian</h1>
      <p class="hero__subtitle">Creative Developer & Designer</p>
    </div>

    <button class="scroll-cue" id="scrollCue" aria-label="Scroll to content">
      <span>Scroll</span>
      <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 16l-6-6h12l-6 6z"></path>
      </svg>
    </button>
  </header>

  <!-- ROLES SCROLL SECTION -->
  <section id="roles" class="roles">
    <div class="roles__inner">
      <div class="roles__left">
        <h2 class="roles__fixed">I’m a</h2>
      </div>

      <div class="roles__right">
        <!-- All phrases are stacked; we animate opacity/position on scroll -->
        <div class="role"><span class="role__text">AI Engineer</span></div>
        <div class="role"><span class="role__text">DevOps Specialist</span></div>
        <div class="role"><span class="role__text">Game Designer</span></div>
      </div>
    </div>
  </section>

  <!-- Next section placeholder; we’ll build later -->
  <section class="next-section">
    <div class="container">
      <h3>Next up…</h3>
      <p>Content coming in the next step.</p>
    </div>
  </section>


  <!-- Placeholder for next section (we'll build it later) -->
  <main id="content">
    <section class="spacer" aria-hidden="true"></section>
  </main>

  <!-- Vanta on HERO -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.waves.min.js"></script>
  <script>
    // Ensure the element exists before initializing Vanta
    let vantaEffect;
    window.addEventListener('DOMContentLoaded', () => {
      vantaEffect = VANTA.WAVES({
        el: "#vanta-bg",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        color: 0x0f6fff,
        shininess: 35.00,
        waveHeight: 15.00,
        waveSpeed: 0.75,
        zoom: 1.00
      });

      // Smooth scroll to the next section
      const cue = document.getElementById('scrollCue');
      cue?.addEventListener('click', () => {
        document.querySelector('#content')?.scrollIntoView({ behavior: 'smooth' });
      });
    });

    // Clean up (optional good practice if you later navigate SPA-style)
    window.addEventListener('beforeunload', () => {
      if (vantaEffect && vantaEffect.destroy) vantaEffect.destroy();
    });
  </script>

  <!-- GSAP + ScrollTrigger (for scroll-driven role transitions) -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

<script>
  // Scroll-driven role cycling
  window.addEventListener('DOMContentLoaded', () => {
    gsap.registerPlugin(ScrollTrigger);

    const phrases = gsap.utils.toArray('#roles .role');
    // Make sure only one is visible initially
    gsap.set(phrases.map(el => el.querySelector('.role__text')), { opacity: 0, y: 30 });

    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: '#roles',
        start: 'top top',
        end: () => '+=' + (phrases.length * window.innerHeight * 0.85), // total scroll length
        scrub: 0.6,
        pin: true,
        anticipatePin: 1
      }
    });

    phrases.forEach((el, i) => {
      const t = el.querySelector('.role__text');

      // fade/slide in
      tl.to(t, { opacity: 1, y: 0, duration: 0.8, ease: 'power2.out' });

      // hold (pause) while user scrolls a bit
      tl.to({}, { duration: 0.6 });

      // fade/slide out (except the last—we add a small out so it exits cleanly)
      tl.to(t, { opacity: 0, y: -30, duration: 0.8, ease: 'power2.in' });
    });

    // Accessibility: avoid tabbing to hidden items
    ScrollTrigger.addEventListener('refresh', () => {
      phrases.forEach(el => {
        const visible = parseFloat(gsap.getProperty(el.querySelector('.role__text'), 'opacity')) > 0.5;
        el.setAttribute('aria-hidden', visible ? 'false' : 'true');
      });
    });
  });
</script>

</body>
</html>
